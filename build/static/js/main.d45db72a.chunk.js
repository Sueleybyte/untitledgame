(this["webpackJsonpreact-three-fiber-untitled-game"]=this["webpackJsonpreact-three-fiber-untitled-game"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"zap",(function(){return M})),n.d(a,"engine",(function(){return P})),n.d(a,"engine2",(function(){return k})),n.d(a,"warp",(function(){return _})),n.d(a,"click",(function(){return R})),n.d(a,"explosion",(function(){return S})),n.d(a,"mp3",(function(){return j}));var r=n(9),o=n(1),i=n(2),c=function(e,t,n){this.player=e;var a=this;this.keys={SPACE:32,LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.domElement=document,this.mouseRelative=t,this.isAlive=!1,this.locked=!1,this.spawned=!1,this.player.position.copy(new o.Vector3(0,0,1e3)),this.playerName="",this.update=function(){a.isAlive&&(this.player.translateZ(-1),r.setFromQuaternion(a.player.quaternion),r.y+=c(a.mouseRelative.x,-.5,.5,.03,-.03),r.x+=c(a.mouseRelative.y,-.5,.5,.03,-.03),r.x=Math.max(-i,Math.min(i,r.x)),a.player.quaternion.setFromEuler(r))};var r=new o.Euler(0,0,0,"YXZ"),i=Math.PI/2;function c(e,t,n,a,r){return(e-t)*(r-a)/(n-t)+a}window.addEventListener("keydown",(function(e){if(a.isAlive)switch(e.keyCode){case a.keys.SPACE:a.locked=!a.locked}else{if(a.spawned)return;var t=e.keyCode;if(13===t){if(!n.isConnected())return;a.spawned=!0,n.spawn(!0),a.isAlive=!0}else{var r=t>47&&t<58||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223;8===t?(a.playerName=a.playerName.substring(0,Math.max(0,a.playerName.length-1)),n.updateName(a.playerName)):r&&(a.playerName=a.playerName+String.fromCharCode(t),n.updateName(a.playerName))}}}),!1)};(c.prototype=Object.create(o.EventDispatcher.prototype)).constructor=c,Object.defineProperties(c.prototype,{});var l=n(0),s=n.n(l),u=n(5),m=n(4),p=n(46),f=n.n(p),h=n(47),d=n.n(h),g=n(48),y=n.n(g),b=n(30),E=n.n(b),x=n(49),v=n.n(x),w=n(50),O=n.n(w),j={explosion:E.a},M=new Audio(O.a),P=new Audio(y.a),k=new Audio(d.a),_=new Audio(v.a),R=new Audio(f.a),S=new Audio(E.a),B=n(52),I=n(51),T=n.n(I);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=1,C=Object(B.a)((function(e,t){var n,a=void 0,r=new o.Box3,c=T()(":5000");return{sound:!1,camera:void 0,connected:!1,playerName:"Type your name",points:0,distance:0,health:100,lasers:[],explosions:[],socket:c,isAlive:!1,spawned:!1,enemies:[],mutation:{t:0,player:new o.Object3D,shipRotation:new o.Euler(0,0,0,"YXZ"),shipPosition:new o.Vector3,worldPosition:new o.Vector3,startTime:Date.now(),socketId:"offline",scale:1,fov:70,hits:!1,looptime:4e4,binormal:new o.Vector3,normal:new o.Vector3,clock:new o.Clock(!1),mouse:new o.Vector2(-250,50),mouseRelative:new o.Vector2(0,0),dummy:new o.Object3D,ray:new o.Ray,box:new o.Box3},actions:{init:function(n){var r=t(),l=r.mutation,s=r.actions;e({camera:n}),l.clock.start(),s.toggleSound(t().sound),Object(i.b)((function(){var n=t(),r=n.enemies,i=n.mutation,l=new o.Vector3(0,0,0),m=Math.round(l.distanceTo(i.player.position));m<530&&s.killPlayer(),e({distance:m});var p=Date.now(),f=r.filter(s.test);i.hits=f.length;var h=t().lasers.filter((function(e){return e.socketId===i.socketId}));if(i.hits&&h.length&&p-h[h.length-1].time<100){s.hitPlayer(f[0].socketId),c.emit("player-hit",f[0].socketId);var d=G({},f[0],{time:Date.now(),guid:z++,scale:1+2.5*Math.random(),position:f[0].worldPosition});e((function(e){return{explosions:[].concat(Object(u.a)(e.explosions),[d])}})),clearTimeout(a),a=setTimeout((function(){return e((function(e){return{explosions:e.explosions.filter((function(e){var t=e.time;return Date.now()-t<=1e3}))}}))}),1e3),e((function(e){return{points:e.points+1}}))}}))},shoot:function(a){t().spawned&&(t().isAlive?(e((function(e){return{lasers:[].concat(Object(u.a)(e.lasers),[{time:Date.now(),socketId:a}])}})),clearTimeout(n),n=setTimeout((function(){return e((function(e){return{lasers:e.lasers.filter((function(e){return Date.now()-e<=1e3}))}}))}),1e3),$(M,.5)):t().actions.spawn(!0))},addPlayer:function(n){console.log("adding player"),console.log(n),e((function(e){return{enemies:[].concat(Object(u.a)(e.enemies),[{socketId:n,hit:new o.Vector3,size:10,scale:1,isAlive:!1}])}})),console.log(t().enemies)},killPlayer:function(){e({isAlive:!1})},hitPlayer:function(n){n!==c.id?e((function(e){return{enemies:e.enemies.map((function(e){return e.socketId!==n?e:G({},e,{},{isAlive:!1})}))}})):t().actions.killPlayer()},spawnPlayer:function(t){e((function(e){return{enemies:e.enemies.map((function(e){return e.socketId!==t?e:G({},e,{},{isAlive:!0})}))}}))},removePlayer:function(t){e((function(e){return{enemies:e.enemies.filter((function(e){return e.socketId!==t}))}}))},updatePlayer:function(t){e((function(e){return{enemies:N(e.enemies,t)}}))},toggleSound:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!t().sound;e({sound:n}),$(P,1,!0),$(k,.3,!0)},spawn:function(n){t().isAlive||(t().mutation.player.position.copy(new o.Vector3(0,0,1e3)),e({isAlive:n}),e({spawned:!0}),c.emit("player-spawn"))},updateName:function(t){e({playerName:t})},isConnected:function(){return t().connected},connect:function(t){e({connected:t})},updateMouse:function(e){var n=e.clientX,a=e.clientY;t().mutation.mouse.set(n-window.innerWidth/2,a-window.innerHeight/2),t().mutation.mouseRelative.set(n/window.innerWidth-.5,a/window.innerHeight-.5)},test:function(e){if(e.isAlive&&e.worldPosition){r.min.copy(e.worldPosition),r.max.copy(e.worldPosition),r.expandByScalar(e.size*e.scale),e.hit.set(1e4,1e4,1e4);var n=t().mutation.ray.intersectBox(r,e.hit);return e.distance=t().mutation.ray.origin.distanceTo(e.hit),n}return!1}}}})),D=Object(m.a)(C,2),F=D[0],V=D[1];function N(e,t){return e.map((function(e){return e.socketId!==t.socketId?e:G({},e,{},t)}))}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];V.getState().sound?(e.currentTime=0,e.volume=t,e.loop=n,e.play()):e.pause()}var L=F;function W(){var e=L((function(e){return e.socket})),t=L((function(e){return e.mutation})),n=L((function(e){return e.actions}));function a(){e.emit("player-update",{position:t.player.position,rotation:t.player.rotation,shipRotation:t.shipRotation,shipPosition:t.shipPosition,worldPosition:t.worldPosition})}return console.log("connection"),e.on("connect",(function(){console.log("> Connected to server"),n.connect(!0)})),e.on("disconnect",(function(){console.log("> Disconnected"),n.connect(!1)})),e.on("bootstrap",(function(e){n.connect(!0),console.log("> bootstrap"),console.log(e.players),t.socketId=e.socketId;for(var a=0,r=Object.keys(e.players);a<r.length;a++){var o=r[a];n.addPlayer(o)}})),e.on("player-add",(function(e){console.log("player-add"),console.log(e),n.addPlayer(e)})),e.on("player-hit",(function(e){console.log("player-hit"),console.log(e),n.hitPlayer(e)})),e.on("player-spawn",(function(e){console.log("player-spawn"),console.log(e),n.spawnPlayer(e)})),e.on("player-remove",(function(e){n.removePlayer(e)})),e.on("player-update",(function(e){n.updatePlayer(e)})),e.on("player-shoot",(function(e){n.shoot(e)})),Object(l.useEffect)((function(){var e=setInterval(a,50);return function(){return clearInterval(e)}})),s.a.createElement(s.a.Fragment,null)}var U=n(63),q=n(64),H=n(62),X=n(57),Y=n(15),Z=n(65);function J(){var e=Object(l.useRef)(),t=Object(i.f)(),n=t.scene,a=t.gl,r=t.size,o=t.camera;L((function(e){return e.isAlive})),L((function(e){return e.spawned}));Object(l.useEffect)((function(){e.current.setSize(r.width,r.height)}),[r]),Object(i.d)((function(){e.current.render()}),2);var c=s.a.createElement(s.a.Fragment,null,s.a.createElement("unrealBloomPass",{args:[void 0,1.6,1,0],attachArray:"passes"}),s.a.createElement("filmPass",{args:[.05,.5,1500,!1],attachArray:"passes"}));return s.a.createElement("effectComposer",{args:[a],ref:e},s.a.createElement("renderPass",{attachArray:"passes",camera:o,scene:n}),c)}Object(i.c)({EffectComposer:U.a,ShaderPass:Y.a,RenderPass:X.a,UnrealBloomPass:Z.a,FilmPass:q.a,GlitchPass:H.a});var Q=n(11),K=new o.BoxBufferGeometry(1,1,40),ee=new o.Color("lightgreen"),te=new o.MeshBasicMaterial({color:ee});function ne(){return L((function(e){return e.enemies})).map((function(e,t){return s.a.createElement(ae,Object.assign({},e,{key:t}))}))}function ae(e){var t=L((function(e){return e.mutation})).clock,n=L((function(e){return e.lasers})).filter((function(t){return t.socketId===e.socketId})),a=Object(l.useRef)(),r=Object(i.e)(Q.a,"/ship.gltf"),o=Object(l.useRef)(),c=Object(l.useRef)(),u=Object(l.useRef)(),m=Object(l.useRef)();return Object(l.useEffect)((function(){e.position&&(m.current.position.copy(e.position),m.current.rotation.copy(e.rotation),u.current.position.copy(e.shipPosition),u.current.rotation.copy(e.shipRotation))}),[e]),Object(i.d)((function(){for(var e=0;e<n.length;e++){a.current.children[e].position.z-=20}o.current.scale.x=1+Math.sin(200*t.getElapsedTime()),o.current.scale.y=1+Math.sin(200*t.getElapsedTime())})),s.a.createElement("group",{ref:m,visible:e.isAlive},s.a.createElement("pointLight",{color:"indianred",distance:400,intensity:5,position:[0,100,-420]}),s.a.createElement("group",{position:[0,0,-50]},s.a.createElement("group",{ref:u},s.a.createElement("group",{scale:[3.5,3.5,3.5]},s.a.createElement("pointLight",{color:"lightgreen",distance:100,intensity:0,position:[0,0,-20],ref:c}),s.a.createElement("group",{ref:a},n.map((function(e,t){return s.a.createElement("group",{key:t},s.a.createElement("mesh",{geometry:K,material:te,position:[-2.8,0,-.8]}),s.a.createElement("mesh",{geometry:K,material:te,position:[2.8,0,-.8]}))}))),s.a.createElement("group",{rotation:[Math.PI/2,Math.PI,0]},s.a.createElement("mesh",{name:"Renault_(S,_T1)_0"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[5].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"#070707"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_1"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[6].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"black"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_2"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[7].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"#070707"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_3"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[8].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"lightblue"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_4"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[9].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"white"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_5"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},r.__$[10].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"teal"})))),s.a.createElement("mesh",{position:[0,1,30],ref:o,scale:[1,1,30]},s.a.createElement("dodecahedronBufferGeometry",{args:[1.5,0],attach:"geometry"}),s.a.createElement("meshBasicMaterial",{attach:"material",color:"lightblue"})))))}function re(e,t){return{ref:s.a.createRef(),color:e,data:new Array(20).fill().map((function(){return[new o.Vector3,new o.Vector3(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1).normalize().multiplyScalar(.75*t)]}))}}function oe(){return L((function(e){return e.explosions})).map((function(e){var t=e.guid,n=e.position,a=e.scale;return s.a.createElement(ie,{key:t,position:n,scale:.75*a})}))}function ie(e){var t=e.position,n=e.scale,r=Object(l.useRef)(),o=L((function(e){return e.mutation})).dummy,c=Object(l.useMemo)((function(){return[re("white",.8),re("orange",.6)]}),[]);return Object(l.useEffect)((function(){$(new Audio(a.mp3.explosion),.5)}),[]),Object(i.d)((function(){c.forEach((function(e,t){var n=e.data,a=r.current.children[t];n.forEach((function(e,t){var n=Object(m.a)(e,2),r=n[0],i=n[1];r.add(i),o.position.copy(r),o.updateMatrix(),a.setMatrixAt(t,o.matrix)})),a.material.opacity-=.025,a.instanceMatrix.needsUpdate=!0}))})),s.a.createElement("group",{position:t,ref:r,scale:[n,n,n]},c.map((function(e,t){var n=e.color,a=e.data;return s.a.createElement("instancedMesh",{args:[null,null,a.length],frustumCulled:!1,key:t},s.a.createElement("dodecahedronBufferGeometry",{args:[10,0],attach:"geometry"}),s.a.createElement("meshBasicMaterial",{attach:"material",color:n,fog:!1,opacity:1,transparent:!0}))})))}var ce=n(6),le=n(7);function se(){var e=Object(ce.a)(["\n  ","\n  text-align: right;\n  top: 40px;\n  right: 50px;\n  font-size: 2em;\n  transform: skew(-5deg, -10deg);\n  pointer-events: all;\n  cursor: pointer;\n  & > a {\n    color: indianred;\n    text-decoration: none;\n  }\n  @media only screen and (max-width: 900px) {\n    font-size: 1.5em;\n  }\n"]);return se=function(){return e},e}function ue(){var e=Object(ce.a)(["\n  ","\n  top: 40px;\n  left: 50px;\n  font-size: 2em;\n  transform: skew(5deg, 10deg);\n  pointer-events: all;\n  cursor: pointer;\n  @media only screen and (max-width: 900px) {\n    font-size: 1.5em;\n  }\n"]);return ue=function(){return e},e}function me(){var e=Object(ce.a)(["\n  ","\n  bottom: 5px;\n  left: 50px;\n  transform: skew(-5deg, -10deg);\n  width: 200px;\n  & > h1 {\n    margin: 0;\n    font-size: 14em;\n    line-height: 1em;\n  }\n  & > h2 {\n    margin: 0;\n    font-size: 4em;\n    line-height: 1em;\n  }\n  @media only screen and (max-width: 900px) {\n    bottom: 30px;\n    & > h1 {\n      font-size: 6em !important;\n    }\n    & > h2 {\n      font-size: 3em !important;\n    }\n  }\n"]);return me=function(){return e},e}function pe(){var e=Object(ce.a)(["\n  ","\n  text-align: center;\n  vertical-align: middle;\n  top: 400px;\n  width: 100%;\n  height: 100%;\n  color: yellow;\n  & > h1 {\n    margin: 0;\n    font-size: 14em;\n    line-height: 1em;\n  }\n  & > h2 {\n    margin: 0;\n    font-size: 4em;\n    line-height: 1em;\n  }\n  @media only screen and (max-width: 900px) {\n    bottom: 30px;\n    & > h1 {\n      font-size: 6em !important;\n    }\n    & > h2 {\n      font-size: 3em !important;\n    }\n  }\n"]);return pe=function(){return e},e}function fe(){var e=Object(ce.a)(["\n  * {\n    box-sizing: border-box;\n  }\n\n  html,\n  body,\n  #root {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    user-select: none;\n    overflow: hidden;\n  }\n\n  #root {\n    overflow: auto;\n    padding: 0px;\n  }\n\n  body {\n    position: fixed;\n    overflow: hidden;\n    overscroll-behavior-y: none;\n    font-family: -apple-system, BlinkMacSystemFont, avenir next, avenir, helvetica neue, helvetica, ubuntu, roboto, noto, segoe ui, arial, sans-serif;\n    color: black;\n    background: white;\n  }\n"]);return fe=function(){return e},e}function he(){var e=Object(ce.a)(["\n  ","\n  text-align: center;\n  vertical-align: middle;\n  top: 200px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  filter: blur(0.5px);\n  color: rgb(207, 207, 257);\n  margin: 0;\n  font-size: 15em;\n  line-height: 1em;\n  text-shadow: 0px 0px 1px rgb(167, 167, 167), 0px 1px 1px rgb(167, 167, 167), 0px 2px 1px rgb(167, 167, 167), 1px 1px 1px rgb(167, 167, 167), 1px 2px 1px rgb(167, 167, 167),\n    1px 3px 1px rgb(167, 167, 167), 2px 2px 1px rgb(167, 167, 167), 2px 3px 1px rgb(167, 167, 167), 2px 4px 1px rgb(167, 167, 167), 1px 10px 30px rgba(0, 0, 0, 0.8),\n    1px 10px 70px rgba(0, 0, 0, 0.8), 0px 5px 5px rgba(0, 0, 0, 0.8), -5px 5px 20px rgba(0, 0, 0, 0.8), 5px 5px 20px rgba(0, 0, 0, 0.8), 1px 1px 120px rgba(255, 255, 255, 0.5);\n  ::after {\n    content: 'Cosmo Revolution';\n    position: absolute;\n    text-align: center;\n    vertical-align: middle;\n    top: 0px;\n    left: 0px;\n    width: 100%;\n    height: 100%;\n    text-shadow: 0px 0px 100px rgba(11, 124, 199, 0.5);\n    animation: cycle 10s linear infinite;\n  }\n  @keyframes cycle {\n    0% {\n      text-shadow: 0px 0px 100px rgba(11, 124, 199, 0.5);\n    }\n    20% {\n      text-shadow: 0px 0px 100px rgba(168, 11, 199, 0.5);\n    }\n    40% {\n      text-shadow: 0px 0px 100px rgba(11, 199, 96, 0.5);\n    }\n    60% {\n      text-shadow: 0px 0px 100px rgba(199, 11, 11, 0.5);\n    }\n    80% {\n      text-shadow: 0px 0px 100px rgba(199, 96, 11, 0.5);\n    }\n  }\n"]);return he=function(){return e},e}function de(){var e=Object(ce.a)(["\n  ","\n  text-align: center;\n  vertical-align: middle;\n  top: 200px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  filter: blur(0.5px);\n  color: rgb(207, 207, 257);\n  margin: 0;\n  font-size: 12em;\n  line-height: 1em;\n"]);return de=function(){return e},e}function ge(){var e=Object(ce.a)(["\n  font-family: 'Teko', sans-serif;\n  position: absolute;\n  text-transform: uppercase;\n  font-weight: 900;\n  font-variant-numeric: slashed-zero tabular-nums;\n  line-height: 1em;\n  pointer-events: none;\n  color: indianred;\n"]);return ge=function(){return e},e}function ye(){var e=L((function(e){return e.points})),t=L((function(e){return e.distance})),n=L((function(e){return e.playerName})),a=L((function(e){return e.isAlive})),r=L((function(e){return e.spawned})),o=L((function(e){return e.sound})),i=L((function(e){return e.connected})),c=L((function(e){return e.actions.toggleSound})),l=s.a.createElement(s.a.Fragment,null);return i||(l=s.a.createElement(we,null,s.a.createElement("h1",null,"Offline"))),r?a?s.a.createElement(s.a.Fragment,null,s.a.createElement(Oe,null,s.a.createElement("h2",null,t),s.a.createElement("h1",null,e)),l,s.a.createElement(ve,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement(Ee,null,s.a.createElement("h2",null,"Wasted")),l,s.a.createElement(ve,null)):s.a.createElement(s.a.Fragment,null,s.a.createElement(xe,null,"Cosmo Revolution"),s.a.createElement(Oe,null,s.a.createElement("h2",null,n)),l,s.a.createElement(je,{onClick:function(){return c()}},"sound",s.a.createElement("br",null),o?"off":"on"),s.a.createElement(Me,null,s.a.createElement("a",{href:"https://codesandbox.io/s/react-three-fiber-untitled-game-4pp5r"},"original source"),s.a.createElement("br",null),s.a.createElement("a",{href:"https://twitter.com/0xca0a"},"original creator twitter"),s.a.createElement("br",null),s.a.createElement("a",{href:"https://github.com/valdirSalgueiro/untitledgame"},"github")),s.a.createElement(ve,null))}var be=Object(le.b)(ge()),Ee=le.c.div(de(),be),xe=le.c.div(he(),be),ve=Object(le.a)(fe()),we=le.c.div(pe(),be),Oe=le.c.div(me(),be),je=le.c.div(ue(),be),Me=le.c.div(se(),be);function Pe(e){var t=e.count,n=void 0===t?3e3:t,a=Object(l.useRef)(),r=L((function(e){return e.mutation})).dummy;return Object(l.useEffect)((function(){for(var e=0;e<n;e++){var t=2*Math.PI*Math.random(),o=Math.acos(2*Math.random()-1),i=500*Math.cos(t)*Math.sin(o)+(400*Math.random()-200),c=500*Math.sin(t)*Math.sin(o)+(400*Math.random()-200),l=500*Math.cos(o)+1e3,s=.5+.5*Math.random();r.position.copy({x:i,y:c,z:l}),r.scale.set(s,s,s),r.rotation.set(Math.sin(Math.random())*Math.PI,Math.sin(Math.random())*Math.PI,Math.cos(Math.random())*Math.PI),r.updateMatrix(),a.current.setMatrixAt(e,r.matrix)}a.current.instanceMatrix.needsUpdate=!0}),[n,r]),s.a.createElement("instancedMesh",{args:[null,null,n],frustumCulled:!1,ref:a},s.a.createElement("coneBufferGeometry",{args:[2,2,3],attach:"geometry"}),s.a.createElement("meshStandardMaterial",{attach:"material",color:"#606060"}))}var ke=n(60),_e=n.n(ke);function Re(){var e=Object(l.useRef)(),t=Object(i.e)(o.TextureLoader,[_e.a]),n=Object(m.a)(t,1)[0];return s.a.createElement("group",{position:[0,0,0],ref:e,scale:[100,100,100]},s.a.createElement("mesh",null,s.a.createElement("sphereBufferGeometry",{args:[5,32,32],attach:"geometry"}),s.a.createElement("meshStandardMaterial",{attach:"material",fog:!1,map:n,roughness:1})),s.a.createElement("pointLight",{distance:1e3,intensity:6,position:[-5,-5,-5]}),s.a.createElement("mesh",{position:[-30,-10,-60]},s.a.createElement("sphereBufferGeometry",{args:[4,32,32],attach:"geometry"}),s.a.createElement("meshBasicMaterial",{attach:"material",color:"#FFFF99",fog:!1}),s.a.createElement("pointLight",{color:"white",distance:6100,intensity:50})))}var Se=n(61),Be=n.n(Se);s.a.memo((function(e){var t=e.gltf,n=e.data,a=Object(l.useRef)(),r=L((function(e){return e.mutation})).clock;return Object(i.d)((function(){var e=Math.cos(r.getElapsedTime()/2*n.speed)*Math.PI;a.current.rotation.set(e,e,e)})),s.a.createElement("group",{position:n.offset,ref:a,scale:[n.scale,n.scale,n.scale]},s.a.createElement("object3D",{position:[-.016298329457640648,-.012838120572268963,.24073271453380585],rotation:[3.0093872578726644,.27444228385461117,-.22745113653772078],scale:[20,20,20]},s.a.createElement("mesh",null,s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[7].geometry)),s.a.createElement("meshStandardMaterial",Object.assign({attach:"material"},t.__$[7].material,{color:"white",emissive:"black",metalness:1,roughness:1})))))}));var Ie=new o.BoxBufferGeometry(1,1,40),Te=new o.Color("lightgreen"),Ae=new o.Color("hotpink"),Ge=new o.MeshBasicMaterial({color:Te}),ze=new o.MeshBasicMaterial({color:Ae,fog:!1}),Ce=new o.Vector3,De=new o.Vector3,Fe=new o.Vector3;function Ve(){var e=Object(i.f)().camera,t=Object(i.e)(Q.a,"/ship.gltf"),n=L((function(e){return e.mutation})),a=L((function(e){return e.isAlive})),r=n.clock,o=n.mouse,c=n.ray,u=L((function(e){return e.lasers})).filter((function(e){return e.socketId===n.socketId})),m=Object(l.useRef)(),p=Object(l.useRef)(),f=Object(l.useRef)(),h=Object(l.useRef)(),d=Object(l.useRef)(),g=Object(l.useRef)(),y=Object(l.useRef)(),b=Object(l.useRef)();return Object(i.d)((function(){if(a){m.current.rotation.z+=.1*(-o.x/500-m.current.rotation.z),m.current.rotation.x+=.1*(-o.y/1200-m.current.rotation.x),m.current.rotation.y+=.1*(-o.x/1200-m.current.rotation.y),m.current.position.x+=.1*(o.x/10-m.current.position.x),m.current.position.y+=.1*(25+-o.y/10-m.current.position.y),h.current.scale.x=1+Math.sin(200*r.getElapsedTime()),h.current.scale.y=1+Math.sin(200*r.getElapsedTime());for(var t=0;t<u.length;t++){p.current.children[t].position.z-=20}f.current.intensity+=.3*((u.length&&Date.now()-u[u.length-1].time<100?20:0)-f.current.intensity),m.current.getWorldPosition(Ce),m.current.getWorldDirection(Fe),c.origin.copy(Ce),c.direction.copy(Fe.negate()),b.current.position.copy(n.player.position),b.current.quaternion.copy(n.player.quaternion),e.position.copy(n.player.position),e.rotation.copy(n.player.rotation),y.current.getWorldPosition(De),n.shipPosition.copy(m.current.position),n.shipRotation.copy(m.current.rotation),n.worldPosition.copy(De),ze.color=n.hits?Te:Ae,d.current.visible=!n.hits,g.current.visible=!!n.hits}})),s.a.createElement("group",{ref:b,visible:a},s.a.createElement("pointLight",{color:"indianred",distance:400,intensity:5,position:[0,100,-420]}),s.a.createElement("group",{position:[0,0,-50]},s.a.createElement("group",{ref:m},s.a.createElement("group",{scale:[3.5,3.5,3.5]},s.a.createElement("group",{name:"cross",position:[0,0,-300],ref:d},s.a.createElement("mesh",{material:ze,renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[20,2,2],attach:"geometry"})),s.a.createElement("mesh",{material:ze,renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[2,20,2],attach:"geometry"}))),s.a.createElement("group",{name:"target",position:[0,0,-300],ref:g},s.a.createElement("mesh",{material:ze,position:[0,20,0],renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[40,2,2],attach:"geometry"})),s.a.createElement("mesh",{material:ze,position:[0,-20,0],renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[40,2,2],attach:"geometry"})),s.a.createElement("mesh",{material:ze,position:[20,0,0],renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[2,40,2],attach:"geometry"})),s.a.createElement("mesh",{material:ze,position:[-20,0,0],renderOrder:1e3},s.a.createElement("boxBufferGeometry",{args:[2,40,2],attach:"geometry"}))),s.a.createElement("pointLight",{color:"lightgreen",distance:100,intensity:0,position:[0,0,-20],ref:f}),s.a.createElement("group",{ref:p},u.map((function(e,t){return s.a.createElement("group",{key:t},s.a.createElement("mesh",{geometry:Ie,material:Ge,position:[-2.8,0,-.8]}),s.a.createElement("mesh",{geometry:Ie,material:Ge,position:[2.8,0,-.8]}))}))),s.a.createElement("group",{ref:y,rotation:[Math.PI/2,Math.PI,0]},s.a.createElement("mesh",{name:"Renault_(S,_T1)_0"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[5].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"#070707"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_1"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[6].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"black"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_2"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[7].geometry)),s.a.createElement("meshStandardMaterial",{attach:"material",color:"#070707"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_3"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[8].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"lightblue"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_4"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[9].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"white"})),s.a.createElement("mesh",{name:"Renault_(S,_T1)_5"},s.a.createElement("bufferGeometry",Object.assign({attach:"geometry"},t.__$[10].geometry)),s.a.createElement("meshBasicMaterial",{attach:"material",color:"teal"})))),s.a.createElement("mesh",{position:[0,1,30],ref:h,scale:[1,1,30]},s.a.createElement("dodecahedronBufferGeometry",{args:[1.5,0],attach:"geometry"}),s.a.createElement("meshBasicMaterial",{attach:"material",color:"lightblue"})))))}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(){var e=Object(l.useRef)(),t=L((function(e){return e.mutation})),n=t.player,a=t.mouseRelative,r=L((function(e){return e.actions}));return Object(i.d)((function(){return e.current.update()})),s.a.createElement("shipControls",{args:[n,a,r],ref:e})}Object(i.c)({ShipControls:c}),Be.a.render(s.a.createElement((function(){var e=L((function(e){return e.mutation})),t=L((function(e){return e.actions})),n=L((function(e){return e.socket}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{camera:$e({position:[0,0,2e3],near:.01,far:1e4},e.fov),onClick:function(){n.emit("player-shoot"),t.shoot(e.socketId)},onCreated:function(e){var n=e.gl,a=e.camera;t.init(a),n.gammaInput=!0,n.toneMapping=o.Uncharted2ToneMapping,n.setClearColor(new o.Color("#020207"))},onPointerMove:t.updateMouse},s.a.createElement("fog",{args:["black",100,700],attach:"fog"}),s.a.createElement("ambientLight",{intensity:.25}),s.a.createElement(Le,null),s.a.createElement(Pe,null),s.a.createElement(oe,null),s.a.createElement(l.Suspense,{fallback:null},s.a.createElement(W,null),s.a.createElement(Re,null),s.a.createElement(ne,null),s.a.createElement(Ve,null)),s.a.createElement(J,null)),s.a.createElement(ye,null))}),null),document.getElementById("root"))},30:function(e,t,n){e.exports=n.p+"static/media/explosion.5c5ce697.mp3"},46:function(e,t,n){e.exports=n.p+"static/media/click.8d516cce.mp3"},47:function(e,t,n){e.exports=n.p+"static/media/engine2.bdb08091.mp3"},48:function(e,t,n){e.exports=n.p+"static/media/engine.e896d081.mp3"},49:function(e,t,n){e.exports=n.p+"static/media/warp.5699f1c4.mp3"},50:function(e,t,n){e.exports=n.p+"static/media/laser.a97c8e67.mp3"},60:function(e,t,n){e.exports=n.p+"static/media/earth.7cddb76f.jpg"},68:function(e,t,n){e.exports=n(112)},97:function(e,t){}},[[68,1,2]]]);
//# sourceMappingURL=main.d45db72a.chunk.js.map